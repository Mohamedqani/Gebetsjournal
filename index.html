<!DOCTYPE html>
<html lang="de">
<head>
Â  <meta charset="UTF-8" />
Â  <meta name="viewport" content="width=device-width, initial-scale=1" />
Â  <title>Mein Gebetsjournal</title>
Â 
Â  <style>
Â Â Â  body {
Â Â Â Â Â  font-family: Arial, sans-serif;
Â Â Â Â Â  background: #f0f8ff;
Â Â Â Â Â  margin: 0;
Â Â Â Â Â  padding: 20px;
Â Â Â Â Â  color: #333;
Â Â Â  }
Â 
Â Â Â  h1 {
Â Â Â Â Â  text-align: center;
Â Â Â Â Â  font-size: 2rem;
Â Â Â Â Â  margin-bottom: 20px;
Â Â Â  }
Â 
Â Â Â  form {
Â Â Â Â Â  max-width: 600px;
Â Â Â Â Â  margin: auto;
Â Â Â Â Â  background: #ffffff;
Â Â Â Â Â  padding: 20px;
Â Â Â Â Â  border-radius: 12px;
Â Â Â Â Â  box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
Â Â Â  }
Â 
Â Â Â  .prayer-section {
Â Â Â Â Â  margin-bottom: 20px;
Â Â Â Â Â  padding: 15px;
Â Â Â Â Â  border: 1px solid #ddd;
Â Â Â Â Â  border-radius: 10px;
Â Â Â Â Â  background: #f9f9f9;
Â Â Â  }
Â 
Â Â Â  .prayer-header {
Â Â Â Â Â  font-size: 1.2rem;
Â Â Â Â Â  margin-bottom: 10px;
Â Â Â Â Â  font-weight: bold;
Â Â Â  }
Â 
Â Â Â  label {
Â Â Â Â Â  display: flex;
Â Â Â Â Â  align-items: center;
Â Â Â Â Â  margin-top: 10px;
Â Â Â  }
Â 
Â Â Â  input[type="checkbox"] {
Â Â Â Â Â  margin-left: 10px;
Â Â Â Â Â  width: 20px;
Â Â Â Â Â  height: 20px;
Â Â Â  }
Â 
Â Â Â  textarea {
Â Â Â Â Â  width: 100%;
Â Â Â Â Â  padding: 10px;
Â Â Â Â Â  font-size: 1rem;
Â Â Â Â Â  border-radius: 8px;
Â Â Â Â Â  border: 1px solid #ccc;
Â Â Â Â Â  resize: vertical;
Â Â Â Â Â  margin-top: 10px;
Â Â Â  }
Â 
Â Â Â  button {
Â Â Â Â Â  width: 100%;
Â Â Â Â Â  padding: 12px;
Â Â Â Â Â  font-size: 1.2rem;
Â Â Â Â Â  font-weight: bold;
Â Â Â Â Â  color: white;
Â Â Â Â Â  background-color: #007bff;
Â Â Â Â Â  border: none;
Â Â Â Â Â  border-radius: 8px;
Â Â Â Â Â  cursor: pointer;
Â Â Â Â Â  margin-top: 20px;
Â Â Â  }
Â 
Â Â Â  button:hover {
Â Â Â Â Â  background-color: #0056b3;
Â Â Â  }
Â  </style>
</head>
<body>
Â 
<h1>Mein Gebetsjournal</h1>
Â 
<form id="prayerForm">
Â  <div class="prayer-section">
Â Â Â  <div class="prayer-header">ğŸŒ… Fajr</div>
Â Â Â  <label>Gebetet?
Â Â Â Â Â  <input type="checkbox" name="fajr_done" />
Â Â Â  </label>
Â Â Â  <textarea name="fajr_notes" placeholder="Notiz zum Fajr"></textarea>
Â  </div>
Â 
Â  <div class="prayer-section">
Â Â Â  <div class="prayer-header">â˜€ï¸ Dhuhr</div>
Â Â Â  <label>Gebetet?
Â Â Â Â Â  <input type="checkbox" name="dhuhr_done" />
Â Â Â  </label>
Â Â Â  <textarea name="dhuhr_notes" placeholder="Notiz zum Dhuhr"></textarea>
Â  </div>
Â 
Â  <div class="prayer-section">
Â Â Â  <div class="prayer-header">ğŸŒ‡ Asr</div>
Â Â Â  <label>Gebetet?
Â Â Â Â Â  <input type="checkbox" name="asr_done" />
Â Â Â  </label>
Â Â Â  <textarea name="asr_notes" placeholder="Notiz zum Asr"></textarea>
Â  </div>
Â 
Â  <div class="prayer-section">
Â Â Â  <div class="prayer-header">ğŸŒ† Maghrib</div>
Â Â Â  <label>Gebetet?
Â Â Â Â Â  <input type="checkbox" name="maghrib_done" />
Â Â Â  </label>
Â Â Â  <textarea name="maghrib_notes" placeholder="Notiz zum Maghrib"></textarea>
Â  </div>
Â 
Â  <div class="prayer-section">
Â Â Â  <div class="prayer-header">ğŸŒ™ Isha</div>
Â Â Â  <label>Gebetet?
Â Â Â Â Â  <input type="checkbox" name="isha_done" />
Â Â Â  </label>
Â Â Â  <textarea name="isha_notes" placeholder="Notiz zum Isha"></textarea>
Â  </div>
Â 
Â  <button type="submit">Speichern & Kalenderexport</button>
</form>
Â 
form.addEventListener('submit', e => {
  e.preventDefault();
  const today = new Date();
  const prayerTimes = {
    fajr: new Date(today.getFullYear(), today.getMonth(), today.getDate(), 5, 0),
    dhuhr: new Date(today.getFullYear(), today.getMonth(), today.getDate(), 12, 30),
    asr: new Date(today.getFullYear(), today.getMonth(), today.getDate(), 15, 30),
    maghrib: new Date(today.getFullYear(), today.getMonth(), today.getDate(), 18, 45),
    isha: new Date(today.getFullYear(), today.getMonth(), today.getDate(), 20, 0),
  };

  let icsEvents = [];

  prayers.forEach(name => {
    const checkbox = document.querySelector(`[name=${name}_done]`);
    const notesField = document.querySelector(`[name=${name}_notes]`);
    const checked = checkbox.checked;
    const notes = notesField.value;

    if (checked) {
      const label = name.charAt(0).toUpperCase() + name.slice(1);
      icsEvents.push(createICSEvent(`${label} Gebet`, prayerTimes[name], notes));
    }
  });

  if (icsEvents.length === 0) {
    alert("Bitte mindestens ein Gebet auswÃ¤hlen.");
    return;
  }

  const icsContent = [
    'BEGIN:VCALENDAR',
    'VERSION:2.0',
    'PRODID:-//MeinGebetsjournal//DE',
    ...icsEvents,
    'END:VCALENDAR'
  ].join('\n');

  const blob = new Blob([icsContent], { type: 'text/calendar' });
  const url = URL.createObjectURL(blob);

  const link = document.createElement('a');
  link.href = url;
  link.download = 'gebetsjournal.ics';
  document.body.appendChild(link);
  link.click();
  document.body.removeChild(link);

  URL.revokeObjectURL(url);

  alert("Kalender-Datei wurde heruntergeladen.");

  // ğŸ”„ NEU: Felder zurÃ¼cksetzen
  prayers.forEach(name => {
    document.querySelector(`[name=${name}_done]`).checked = false;
    document.querySelector(`[name=${name}_notes]`).value = '';
  });
});

Â 
Â  function createICSEvent(title, startDate, notes) {
Â Â Â  const endDate = new Date(startDate.getTime() + 30 * 60000);
Â Â Â  return [
Â Â Â Â Â  'BEGIN:VEVENT',
Â Â Â Â Â  'SUMMARY:' + title,
Â Â Â Â Â  'DTSTART:' + formatICSDate(startDate),
Â Â Â Â Â  'DTEND:' + formatICSDate(endDate),
Â Â Â Â Â  'DESCRIPTION:' + (notes || ''),
Â Â Â Â Â  'END:VEVENT'
Â Â Â  ].join('\n');
Â  }
Â 
Â  form.addEventListener('submit', e => {
Â Â Â  e.preventDefault();
Â Â Â  const today = new Date();
Â Â Â  const prayerTimes = {
Â Â Â Â Â  fajr: new Date(today.getFullYear(), today.getMonth(), today.getDate(), 5, 0),
Â Â Â Â Â  dhuhr: new Date(today.getFullYear(), today.getMonth(), today.getDate(), 12, 30),
Â Â Â Â Â  asr: new Date(today.getFullYear(), today.getMonth(), today.getDate(), 15, 30),
Â Â Â Â Â  maghrib: new Date(today.getFullYear(), today.getMonth(), today.getDate(), 18, 45),
Â Â Â Â Â  isha: new Date(today.getFullYear(), today.getMonth(), today.getDate(), 20, 0),
Â Â Â  };
Â 
Â Â Â  let icsEvents = [];
Â 
Â Â Â  prayers.forEach(name => {
Â Â Â Â Â  const checked = document.querySelector(`[name=${name}_done]`).checked;
Â Â Â Â Â  const notes = document.querySelector(`[name=${name}_notes]`).value;
Â Â Â Â Â  if (checked) {
Â Â Â Â Â Â Â  const label = name.charAt(0).toUpperCase() + name.slice(1);
Â Â Â Â Â Â Â  icsEvents.push(createICSEvent(`${label} Gebet`, prayerTimes[name], notes));
Â Â Â Â Â  }
Â Â Â  });
Â 
Â Â Â  if (icsEvents.length === 0) {
Â Â Â Â Â  alert("Bitte mindestens ein Gebet auswÃ¤hlen.");
Â Â Â Â Â  return;
Â Â Â  }
Â 
Â Â Â  const icsContent = [
Â Â Â Â Â  'BEGIN:VCALENDAR',
Â Â Â Â Â  'VERSION:2.0',
Â Â Â Â Â  'PRODID:-//MeinGebetsjournal//DE',
Â Â Â Â Â  ...icsEvents,
Â Â Â Â Â  'END:VCALENDAR'
Â Â Â  ].join('\n');
Â 
Â Â Â  const blob = new Blob([icsContent], { type: 'text/calendar' });
Â Â Â  const url = URL.createObjectURL(blob);
Â 
Â Â Â  const link = document.createElement('a');
Â Â Â  link.href = url;
Â Â Â  link.download = 'gebetsjournal.ics';
Â Â Â  document.body.appendChild(link);
Â Â Â  link.click();
Â Â Â  document.body.removeChild(link);
Â 
Â Â Â  URL.revokeObjectURL(url);
Â 
Â Â Â  alert("Kalender-Datei wurde heruntergeladen. ");
Â  });
</script>
Â 
</body>
</html>
